<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>M-Gacha Carnival</title>
  <link rel="icon" href="assets/logo-mandiri.png" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Arial', sans-serif;
      background-image: url('assets/background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 120px;
    }

    h1 {
      margin-top: 60px;
      font-size: 28px;
      font-weight: bold;
      text-shadow: 1px 1px 3px #000;
    }

    .gift-boxes {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .gift-box {
      width: 90px;
      height: 90px;
      background: orange;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .gift-box:hover {
      transform: scale(1.1);
    }

    .counter {
      margin-top: 12px;
      font-weight: bold;
      font-size: 14px;
      background-color: rgba(0,0,0,0.4);
      padding: 6px 12px;
      border-radius: 8px;
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      color: black;
      padding: 20px 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      z-index: 99;
      display: none;
    }

    .popup.show {
      display: block;
    }

    footer {
      position: absolute;
      bottom: 10px;
      font-size: 12px;
      opacity: 0.6;
    }
  </style>
</head>
<body>

  <img src="assets/logo-mandiri.png" class="logo" alt="Logo Mandiri" />
  
  <h1>üéÅ Pilih Hadiahmu!</h1>

  <div class="counter" id="spinCount">Spin ke-0 dari 10 | Poin: 10</div>

  <div class="gift-boxes">
    <div class="gift-box" onclick="spinGift(0)"></div>
    <div class="gift-box" onclick="spinGift(1)"></div>
    <div class="gift-box" onclick="spinGift(2)"></div>
    <div class="gift-box" onclick="spinGift(3)"></div>
  </div>

  <div class="popup" id="popup"></div>

  <footer>
    ¬© 2025 Bank Mandiri - M-Gacha Carnival UI
  </footer>

  <audio id="spinSound" src="assets/arcade-sound.mp3"></audio>

  <script>
    const hadiahList = [
      "+3 M-Gacha Poin",
      "i-Voucher Indomaret Rp 50.000",
      "i-Voucher Indomaret Rp 100.000",
      "Voucher Alfamart Rp 50.000",
      "Voucher Alfamart Rp 100.000",
      "Voucher Grab Rp 50.000",
      "Iphone 15 128GB",
      "Samsung Smart TV 32‚Äù",
      "Honda Vario 125 CBS ISS",
      "Logam Mulia 1gr"
    ];

    let spinCount = 0;
    let mGachaPoin = 10;

    function spinGift(boxIndex) {
      if (spinCount >= 10) {
        showPopup("Kamu telah mencapai batas 10 spin hari ini. Silakan coba lagi besok.");
        return;
      }

      if (mGachaPoin < 2) {
        showPopup("Poin M-Gacha kamu tidak cukup. Minimum 2 poin untuk spin.");
        return;
      }

      // Probabilitas tinggi untuk poin
      const random = Math.random();
      let hadiah;
      if (random < 0.5) {
        hadiah = hadiahList[0]; // +3 Poin
        mGachaPoin += 1; // Karena -2 +3 = +1
      } else {
        hadiah = hadiahList[Math.floor(Math.random() * (hadiahList.length - 1)) + 1];
        mGachaPoin -= 2;
      }

      spinCount++;
      document.getElementById('spinCount').innerText = `Spin ke-${spinCount} dari 10 | Poin: ${mGachaPoin}`;
      showPopup(`üéâ Selamat! Kamu mendapatkan: <b>${hadiah}</b>`);

      // Play sound
      document.getElementById("spinSound").play();
    }

    function showPopup(message) {
      const popup = document.getElementById("popup");
      popup.innerHTML = message;
      popup.classList.add("show");
      setTimeout(() => {
        popup.classList.remove("show");
      }, 3000);
    }
  </script>

</body>
</html>
